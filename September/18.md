本日も中間試験の解答例のコードを復習。
復讐というか、初見のコードが多いので、学習。

一番、理解に時間を要したのは、解答例のオリジナルメソッドsave_with_tagsメソッドである。
models/post.rb

  def save_with_tags(tag_names:)
    ActiveRecord::Base.transaction do
      self.tags = tag_names.map { |name| Tag.find_or_initialize_by(name: name.strip) }
      save!
    end
    true
  rescue StandardError
    false
  end

まだ完全に理解をしていない。
まず、self.tagsでpostとtagsを対応付けるとのこと。
そのtagsとは、どこに記述のものかというと
has_many :tags, through: :tag_relationships
とのこと。
まさかのアソシエーションに対応付けられていた。（わかるわけない）
さらに、難解のコードはfind_or_initializeメソッドである。
これは、同時に二つのことをしている。
一つは、データベースに引数のタグがあれば、そのタグを参照する。(find)
もう一つは、データベースに引数のタグがなければ、Tag.newをする。(initialize)
なかなか、難解である。
そもそも、今、書いた解釈も合っているかわからない。
(name:name.strip)はスペースを排除するという働きらしい。
find_or_initializeは、いつか、再び出会った時、もう一度調べるであろう。

あとは、解答例のコードを実装した時のエラーを処理した。
丁寧にデバックすれば、すぐに解決する問題を、世界陸上を観ながら対応していたので時間がかかった。

明日中に、中間試験の復習は終わらせたい。
そして明後日からは、カリキュラムを進めたい。
今は、世界陸上があるので、夜は学習にならない。