昨日は、用事の為、学習時間が確保できなかった。
その代わり、中間試験Rails課題についてLGTMがもらえたので、中間試験をクリアした。
本日は、中間試験Railsの解答例を復習していた。
しかし、肩のリハビリと診察があった為、あまり学習時間を確保できなかった。（体調もあまり良くないので、夜の学習はなし。早く就寝することとする）

application_controller.rbの復習。
before_action :メソッド名
と定義することで、このコントローラー内のアクションを実行する前に、必ず呼び出す処理を登録する。
before_action :メソッド名、only:%[new create]
のようにonly指定をすることで、対象となるアクションを限定できる。

helper_method :メソッド名
と定義することで、定義したメソッドがviewでも使用可能になる。

blank? はnil,false,空文字、[],{}の場合、trueを返す。

fetchメソッドの使い方。

hash = { a: 100, b: 200 }

hash.fetch(:a)           #=> 100
hash.fetch(:c, 0)        #=> 0   (キー :c が無いときはデフォルト値 0 を返す)
hash.fetch(:c)           #=> KeyError (デフォルト値を指定しないとエラー)

params.fetch(:q, {})とすると、params[:q]があれば、その値を返す。
なければ{}を返す。
という意味になり、nilを回避している。

paramsの仕組み。
大きく分けて２種類ある。
１　フォーム送信
　　例　<form action="/posts" method="post">
  　　　<input type="text" name="post[title]" value="タイトル">
  　　　<input type="text" name="post[body]" value="本文">
　　　　</form>
　これを送信すると
　　　　params = {"post" => { "title" => "タイトル", "body" => "本文" }}
　となる。

２　URLの一部（ルーティング動的セグメント）
　　GET /posts/10/edit
   これでparams[:id]には１０が入る。
　　例　/users/5/posts/12/edit
　　とするとparamsの中身は
　　{
  　　"user_id" => "5",
  　　"id" => "12"
　　}

if文の代入式
if(tag_name = params[:tag_name])
と記載することで、params[:tag_name]に値が入っていれば、tag_nameに値が代入され、条件はtrueとなる。
params[:tag_name]がnilや空文字であればfalseとなる。

scopeメソッドの構文
scope :スコープ名, ->(引数) { 条件（ActiveRecordのクエリメソッド） }
例　scope :with_tag, ->(tag_name) { joins(:tags).where(tags: { name: tag_name }) }
tag_nameは引数が入る。
joins(:tags)は、postsテーブルとtagsテーブルを結合している。
where(tags: {name: tag_name})
はtagsテーブルのnameカラムからtag_nameと一致する行だけ取得。